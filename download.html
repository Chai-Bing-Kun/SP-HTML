<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下载 Spark - 柴炳坤</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* 基础按钮样式 - 确保文字颜色不变 */
        .download-button, .run-button, .github-link {
            display: inline-block;
            color: white !important;
            padding: 15px 25px;
            text-decoration: none;
            font-size: 18px;
            border-radius: 5px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin: 10px 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
        }

        /* 按钮颜色 */
        .download-button {
            background-color: rgba(76, 175, 80, 0.9);
        }
        .run-button {
            background-color: rgba(52, 152, 219, 0.9);
        }
        .github-link {
            background-color: rgba(155, 89, 182, 0.9);
        }

        /* 鼠标悬停光晕效果 */
        .download-button::before, .run-button::before, .github-link::before {
            content: '';
            position: absolute;
            top: var(--mouse-y);
            left: var(--mouse-x);
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: width 0.4s ease-out, height 0.4s ease-out, opacity 0.3s ease;
            pointer-events: none;
        }

        .download-button:hover::before, 
        .run-button:hover::before, 
        .github-link:hover::before {
            width: 200px;
            height: 200px;
            opacity: 1;
        }

        /* 按钮悬停状态 */
        .download-button:hover, .run-button:hover, .github-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            color: white !important;
        }

        /* 按钮点击效果 */
        .download-button:active, .run-button:active, .github-link:active {
            transform: translateY(1px);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            color: white !important;
        }

        /* 产品展示区域 */
        .product-showcase {
            transition: all 0.4s ease;
            transform: translateY(10px);
            opacity: 0;
            animation: fadeInUp 0.6s forwards;
            animation-delay: 0.3s;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(8px);
        }

        @keyframes fadeInUp {
            from {
                transform: translateY(10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* 产品图片 */
        .product-image {
            transition: all 0.4s ease;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            height: auto;
            margin: 20px 0;
            max-height: 300px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .product-image:hover {
            transform: scale(1.01);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        /* 下载区域样式 */
        .download-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        /* 对话框样式 - 多页下载选项 */
        dialog {
            border: none;
            border-radius: 8px;
            padding: 0;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            animation: dialogFadeIn 0.3s ease-out;
            background: linear-gradient(135deg, #f5f7fa 0%, #e6e9f0 100%);
            position: relative;
        }

        @keyframes dialogFadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 对话框标题栏 */
        .dialog-header {
            padding: 15px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dialog-title {
            margin: 0;
            font-size: 20px;
            color: #333;
        }

        /* 关闭按钮 */
        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #777;
            padding: 0 10px;
            transition: all 0.2s ease;
        }

        .close-button:hover {
            color: #333;
            transform: scale(1.1);
        }

        /* 下载选项页面容器 */
        .download-pages {
            position: relative;
            min-height: 300px;
            overflow: hidden;
            padding: 20px;
        }

        /* 单个下载选项页面 */
        .download-page {
            position: absolute;
            width: calc(100% - 40px);
            top: 20px;
            left: 20px;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }

        .download-page.active {
            opacity: 1;
            transform: translateX(0);
            position: relative;
        }

        .download-page.prev {
            transform: translateX(-100%);
        }

        /* 导航按钮 */
        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .nav-button:hover {
            background: rgba(0,0,0,0.2);
        }

        .prev-button {
            left: 10px;
        }

        .next-button {
            right: 10px;
        }

        /* 页面指示器 */
        .page-indicator {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            padding-bottom: 15px;
        }

        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ccc;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #555;
            transform: scale(1.2);
        }

        /* 预留图片接口 */
        .download-preview-image {
            width: 100%;
            max-height: 150px;
            object-fit: contain;
            margin-bottom: 15px;
            border-radius: 5px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-style: italic;
        }

        /* 预留描述文字 */
        .download-description {
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
            color: #555;
        }

        /* 加载动画 */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.4s ease;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(76, 175, 80, 0.2);
            border-radius: 50%;
            border-top-color: rgba(76, 175, 80, 0.8);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .download-section {
                flex-direction: column;
                align-items: center;
            }
            
            .download-button, .run-button, .github-link {
                width: 100%;
                margin: 5px 0;
            }
            
            .product-image {
                max-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div id="loading">
        <div class="loader"></div>
    </div>

    <div class="background-container">
        <header>
            <h1>下载 Spark</h1>
            <nav>
                <ul>
                    <li><a href="index.html">主页</a></li>
                    <li><a href="javascript:void(0);" onclick="showAnnouncement();">公告</a></li>
                    <li><a href="lock.html">加密</a></li>
                    <li><a href="download.html">下载 Spark</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section class="product-showcase">
                <h2>Spark 5</h2>
                
                <p class="product-description">Spark 5 是目前最新的spark系列操作系统，你可以用它进行联网等操作。(当前最新版本：5.3.3.1）<br>目前网站只提供部分下载方式，具体请看Github网站</p>
                <div class="download-section">
                    <button onclick="window.location.href='Spark for the web/Spark 5.html'" class="run-button">在网页中运行</button>
                    <button onclick="showDownloadOptions('spark5')" class="download-button">下载最新版 Spark 5</button>
                    <a href="https://github.com/Chai-Bing-Kun/Spark-X" class="github-link" target="_blank">在GitHub中查看</a>
                </div>
            </section>

            <section class="product-showcase">
                <h2>Spark 4</h2>
    
                <p class="product-description">Spark 4 是 Spark 系列的前代版本，现在已停止更新，请你转为下载最新版的spark 5。</p>
                    <div class="download-section">
                    <button onclick="window.location.href='Spark for the web/Spark 4.html'" class="run-button">在网页中运行</button>
                    <button onclick="showDownloadOptions('spark4')" class="download-button">下载最新版 Spark 4</button>
                    <a href="https://github.com/Chai-Bing-Kun/Spark-X" class="github-link" target="_blank">在GitHub中查看</a>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 柴炳坤. 保留所有权利。</p>
            <button id="themeToggle">切换主题</button>
        </footer>
    </div>

    <dialog id="downloadDialog">
        <div class="dialog-header">
            <h2 class="dialog-title">选择下载选项</h2>
            <button class="close-button" onclick="closeDialog()">×</button>
        </div>
        <div class="download-pages">
            <!-- 标准下载页面 -->
            <div class="download-page active" data-page="0">
                <div class="download-preview-image">
                    <!-- 预留图片插入接口 -->
                    <span>从github上下载</span>
                </div>
                <div class="download-description">
                    <!-- 预留描述文字 -->
                    <p>这是github上的直链下载链接下载方式，请点击下方按钮，选择合适的内容下载</p>
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <button onclick="download('apk')" class="download-button">Android</button>
                    <button onclick="download('windows')" class="download-button">Windows</button>
                    <button onclick="download('mac')" class="download-button">Mac</button>
                    <button onclick="download('linux')" class="download-button">Linux</button>
                </div>
            </div>
            
            <!-- 快速下载页面 -->
            <div class="download-page" data-page="1">
                <div class="download-preview-image">
                    <!-- 预留图片插入接口 -->
                    <span>从ghproxy上下载</span>
                </div>
                <div class="download-description">
                    <!-- 预留描述文字 -->
                    <p>这是ghproxy上的下载链接，请点击下方按钮，选择合适的内容下载</p>
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <button onclick="download('fastapk')" class="download-button">Android</button>
                    <button onclick="download('fastwindows')" class="download-button">Windows</button>
                    <button onclick="download('fastmac')" class="download-button">Mac</button>
                    <button onclick="download('fastlinux')" class="download-button">Linux</button>
                </div>
            </div>
            
            <!-- 批量下载页面 -->
            <div class="download-page" data-page="2">
                <div class="download-preview-image">
                    <!-- 预留图片插入接口 -->
                    <span>从ghproxy上下载</span>
                </div>
                <div class="download-description">
                    <!-- 预留描述文字 -->
                    <p>这是ghproxy上的批量下载链接，请点击下方按钮，选择合适的内容下载</p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="download('all')" class="download-button" style="background-color: #e74c3c;">全部下载</button>
                </div>
            </div>
            
            <button class="nav-button prev-button" onclick="prevPage()">❮</button>
            <button class="nav-button next-button" onclick="nextPage()">❯</button>
        </div>
        
        <div class="page-indicator">
            <div class="indicator-dot active" data-page="0"></div>
            <div class="indicator-dot" data-page="1"></div>
            <div class="indicator-dot" data-page="2"></div>
        </div>
    </dialog>

    <dialog id="announcementDialog">
        <h2>  公告</h2>
        <div style="max-height: 400px; overflow-y: auto; padding: 10px;">
            <h3>新版本说明</h3>
            <ul>
                <li>目前最新版：5.3.3.1</li>
                <li>修复了无法打开应用的Bug</li>
                <li>修复了因登录/注册名字识别错误的Bug</li>
                <li>增大了图形显示性能（可能会使内存崩溃）</li>
            </ul>
            
            <h3>网站公告</h3>
            <ul>
                <li>欢迎大家来参加先遣版的报名！</li>
                <li>网站和应用是免费无广告的</li>
                <li>本作品只是一个演示文件，娱乐所做</li>
                <li>更新了下载界面的样式</li>
                <li>新增了邮件回访功能</li>
                <li>修复了网站加密功能无法跳转的Bug</li>
                <li>欢迎大家来反馈！</li>
            </ul>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="closeAnnouncementDialog()" style="background-color: #95a5a6; color: white;">关闭</button>
        </div>
    </dialog>

    <script>
        let currentProduct = '';
        let currentPage = 0;
        const totalPages = 3;

        // 为按钮添加鼠标位置追踪
        document.querySelectorAll('.download-button, .run-button, .github-link').forEach(button => {
            button.addEventListener('mousemove', (e) => {
                const rect = button.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                button.style.setProperty('--mouse-x', `${x}px`);
                button.style.setProperty('--mouse-y', `${y}px`);
            });
            
            // 确保链接文字颜色不会变化
            button.addEventListener('mouseenter', () => {
                button.style.color = 'white';
            });
            button.addEventListener('mouseleave', () => {
                button.style.color = 'white';
            });
        });

        // 切换下载页面
        function changePage(pageIndex) {
            const pages = document.querySelectorAll('.download-page');
            const dots = document.querySelectorAll('.indicator-dot');
            
            pages.forEach((page, index) => {
                if (index === pageIndex) {
                    page.classList.add('active');
                    page.classList.remove('prev');
                } else {
                    page.classList.remove('active');
                    if (index < pageIndex) {
                        page.classList.add('prev');
                    } else {
                        page.classList.remove('prev');
                    }
                }
            });
            
            dots.forEach((dot, index) => {
                if (index === pageIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            currentPage = pageIndex;
        }

        function prevPage() {
            const newPage = (currentPage - 1 + totalPages) % totalPages;
            changePage(newPage);
        }

        function nextPage() {
            const newPage = (currentPage + 1) % totalPages;
            changePage(newPage);
        }

        // 点击指示器切换页面
        document.querySelectorAll('.indicator-dot').forEach(dot => {
            dot.addEventListener('click', () => {
                const pageIndex = parseInt(dot.getAttribute('data-page'));
                changePage(pageIndex);
            });
        });

        function showAnnouncement() {
            const dialog = document.getElementById('announcementDialog');
            dialog.showModal();
        }

        function closeAnnouncementDialog() {
            const dialog = document.getElementById('announcementDialog');
            dialog.close();
        }

        function showDownloadOptions(product) {
            currentProduct = product;
            currentPage = 0;
            changePage(0);
            const dialog = document.getElementById('downloadDialog');
            dialog.showModal();
        }

        function closeDialog() {
            const dialog = document.getElementById('downloadDialog');
            dialog.close();
        }

        function download(type) {
    let files;
    if (currentProduct === 'spark5') {
        files = {
            'apk': 'https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/H53034E71__20250302073119.apk',
            'windows': 'https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.zip',
            'mac': 'https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.WKWebView.macOS.zip',
            'linux': 'https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.64.Electron.Linux.zip',
            'fastapk': 'https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/H53034E71__20250302073119.apk',
            'fastwindows': 'https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.zip',
            'fastmac': 'https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.WKWebView.macOS.zip',
            'fastlinux': 'https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.5.3.3.1/Spark.5.3.3.1.64.Electron.Linux.zip'
        };
    } else if (currentProduct === 'spark4') {
        files = {
            'apk': 'https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.4.1.1.0/H5DD2E11E__20240727081549.apk',
            'windows': 'download/致歉声明.txt',
            'mac': 'download/致歉声明.txt',
            'linux': 'download/致歉声明.txt',
            'fastapk': 'https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/releases/download/v.4.1.1.0/H5DD2E11E__20240727081549.apk',
            'fastwindows': 'download/致歉声明.txt',
            'fastmac': 'download/致歉声明.txt',
            'fastlinux': 'download/致歉声明.txt'
        };
    }

    if (type === 'all') {
        if (currentProduct === 'spark5') {
            window.open('https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/archive/refs/tags/v.5.3.3.1.zip', '_blank');
        } else if (currentProduct === 'spark4') {
            window.open('https://ghproxy.cn/https://github.com/Chai-Bing-Kun/Spark-X/archive/refs/tags/v.4.1.1.0.zip', '_blank');
        }
    } else {
        window.open(files[type], '_blank');
    }

    closeDialog();
}

        // 页面加载完成后执行
        window.addEventListener('load', function() {
            const loading = document.getElementById('loading');
            
            // 隐藏加载动画
            setTimeout(function() {
                loading.style.opacity = '0';
                setTimeout(function() {
                    loading.style.display = 'none';
                }, 400);
            }, 800);
            
            // 触发产品展示区域的动画
            document.querySelectorAll('.product-showcase').forEach((el, index) => {
                el.style.animationDelay = `${index * 0.2}s`;
            });
        });
    </script>
    <script src="theme.js"></script>
</body>
</html>
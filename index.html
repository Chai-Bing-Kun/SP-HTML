<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spark 操作系统 - 主页</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"> <!-- 引入字体 -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body, html {
            font-family: 'Roboto', sans-serif; /* 使用指定字体 */
        }

        /* 修改加载动画样式为第二个文件的效果 */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.4s ease;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(76, 175, 80, 0.2);
            border-radius: 50%;
            border-top-color: rgba(76, 175, 80, 0.8);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 其他样式保持不变 */
        #feedbackBtn {
            background-color: #4CAF50; /* 按钮背景色 */
            color: white; /* 按钮文字颜色 */
            border: none; /* 去掉边框 */
            padding: 10px 20px; /* 内边距 */
            text-align: center; /* 文字居中 */
            text-decoration: none; /* 去掉下划线 */
            display: inline-block; /* 使按钮为块级元素 */
            font-size: 16px; /* 字体大小 */
            margin: 4px 2px; /* 外边距 */
            cursor: pointer; /* 鼠标悬停时显示手型 */
            border-radius: 5px; /* 圆角 */
            transition: background-color 0.3s, transform 0.2s; /* 添加过渡效果 */
        }

        #feedbackBtn:hover {
            background-color: #45a049; /* 悬停时的背景色 */
            transform: scale(1.05); /* 悬停时放大效果 */
        }

        #feedbackBtn:active {
            transform: scale(0.95); /* 点击时缩小效果 */
        }

        #themeToggle {
            background-color: #007BFF; /* 按钮背景色 */
            color: white; /* 按钮文字颜色 */
            border: none; /* 去掉边框 */
            padding: 10px 20px; /* 内边距 */
            text-align: center; /* 文字居中 */
            text-decoration: none; /* 去掉下划线 */
            display: inline-block; /* 使按钮为块级元素 */
            font-size: 16px; /* 字体大小 */
            margin: 4px 2px; /* 外边距 */
            cursor: pointer; /* 鼠标悬停时显示手型 */
            border-radius: 5px; /* 圆角 */
            transition: background-color 0.3s, transform 0.2s; /* 添加过渡效果 */
        }

        #themeToggle:hover {
            background-color: #0056b3; /* 悬停时的背景色 */
            transform: scale(1.05); /* 悬停时放大效果 */
        }

        #themeToggle:active {
            transform: scale(0.95); /* 点击时缩小效果 */
        }

        #submitFeedback, #cancelFeedback {
            background-color: #4CAF50; /* 按钮背景色 */
            color: white; /* 按钮文字颜色 */
            border: none; /* 去掉边框 */
            padding: 10px 20px; /* 内边距 */
            text-align: center; /* 文字居中 */
            text-decoration: none; /* 去掉下划线 */
            display: inline-block; /* 使按钮为块级元素 */
            font-size: 16px; /* 字体大小 */
            margin: 4px 2px; /* 外边距 */
            cursor: pointer; /* 鼠标悬停时显示手型 */
            border-radius: 5px; /* 圆角 */
            transition: background-color 0.3s, transform 0.2s; /* 添加过渡效果 */
        }

        #submitFeedback:hover, #cancelFeedback:hover {
            background-color: #45a049; /* 悬停时的背景色 */
            transform: scale(1.05); /* 悬停时放大效果 */
        }

        #submitFeedback:active, #cancelFeedback:active {
            transform: scale(0.95); /* 点击时缩小效果 */
        }
    </style>
</head>
<body>
    <!-- 修改加载动画为第二个文件的效果 -->
    <div id="loading">
        <div class="loader"></div>
    </div>

    <div class="background-container">
        <header>
            <div class="header-left">
                
                <h1>Spark 操作系统</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">主页</a></li>
                    <li><a href="products.html" onclick="showAnnouncement(); return false;">公告</a></li>
                    <li><a href="lock.html">加密</a></li>
                    <li><a href="download.html">下载 Spark</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section>
                <h2 class="section-title">什么是Spark？</h2>
                <p>Spark是一款初（网名）编写的模拟操作系统（虽然不是真正的操作系统，但是也颇具几分姿色）Spark系统主要由安装界面和主要图形操作界面为主。Spark第一代并不叫作Spark 1.0.0.0，而是被称作dictionary 1.0，开发者也许是希望他能查阅到很多信息吧……不过可惜的是dictionary 1.0系统的源代码已经找不到了……</p>
            </section>

            <section>
                <h2 class="section-title">为什么要编写Spark？</h2>
                <p>Spark的灵感主要是开发者在编程社区中闲逛时，看到了一个名为Windows 10操作系统的模拟编程作品，于是便有了开发一款操作系统的想法。 Spark操作系统最早编写于2021年，每一代操作系统都随着上一代的迭代而更新，操作也变得更加流畅和稳定。随着越来越多的Java插件的发现和云存储的发现，在Spark 4发布结束后，首次出现了联网的一批代表性编程作品。主要以多个用户移动不同的区块来进行图形交互操作。在spark 5之后，操作系统就支持了联网， Spark也就顺理成章地进入了互联网时代。Java插件是一个非常有用的东西，它允许开发者可以通过Java的带入来进行更多有趣的操作。比如spark 5的一项功能："聊天"就采用了"汉字转换英文1.0"</p>
            </section>

            <section>
                <h2 class="section-title">如何正确部署Spark？</h2>
                <p style="font-size: 16px;">
                    手机版：<br>
                    跳转到 <a href="https://spark-home.pages.dev/download" target="_blank" style="color: #0366d6; text-decoration: underline;">https://spark-home.pages.dev/download</a>，点击下载按钮，下载apk安装包：<br>
                     <!-- 这里插入一个图片1 -->
                </p>

                <br><br> <!-- 插入两行换行 -->

                <p style="font-size: 16px;">
                    Windows版：<br>
                    跳转到 <a href="https://spark-home.pages.dev/download" target="_blank" style="color: #0366d6; text-decoration: underline;">https://spark-home.pages.dev/download</a>，点击下载按钮，下载Zip文件<br>
                     <br><!-- 这里插入一个图片2 -->
                    解压文件<br>
                    <span id="commandPath">
                        打开命令行终端运行：<br>
                        (这里替换成解压后的位置)\spark\spark.exe
                    </span>
                    <button onclick="copyToClipboard('#commandPath')" style="margin-left: 10px; border: none; border-radius: 5px; background-color: rgba(76, 175, 80, 0.5); color: white; padding: 5px 10px; cursor: pointer;">复制</button><br>
                    例如：<br>
                    <span id="examplePath">D:\Spark 5\Windows\spark\spark.exe</span>
                    <button onclick="copyToClipboard('#examplePath')" style="margin-left: 10px; border: none; border-radius: 5px; background-color: rgba(76, 175, 80, 0.5); color: white; padding: 5px 10px; cursor: pointer;">复制</button>
                </p>

                <p style="font-size: 16px;">(Linux和Mac文件可参阅解压后的txt文件进行操作)</p>
            </section>
        </main>

        <footer>
           <p>&copy; 2024 柴炳坤. 保留所有权利。</p>
           <button id="feedbackBtn">向我们提供你的建议</button>
           <button id="themeToggle">切换主题</button>
           <p style="font-size: 12px; margin-top: 10px;">你是否在寻找班级的网站？跳转到 <a href="https://cn-202208-y.pages.dev/" target="_blank" style="color: #0366d6; text-decoration: underline;">班级网站</a></p>
         </footer>
    </div>

    <dialog id="announcementDialog">
        <h2>  公告</h2>
        <p>
            以下是新版本说明<br>
            1.目前最新版：5.3.3.1<br>
            2.修复了修复了无法打开应用的Bug<br>
            3.修复了因登录/注册名字识别错误的Bug<br>
            3.增大了图形显示性能（可能会使内存崩溃）<br><br>
            以下是网站公告<br>
            1.欢迎大家来参加先遣版的报名！<br>
            2.网站和应用是免费无广告的<br>
            3.本作品只是一个演示文件，娱乐所做<br>
            4.更新了下载界面的样式<br>
            5.新增了邮件回访功能<br>
            6.修复了网站加密功能无法跳转的Bug<br>
            7.欢迎大家来反馈！
        </p>
        <button onclick="closeAnnouncementDialog()">关闭</button>
    </dialog>

    <dialog id="feedbackDialog">
        <h2>提供你的建议</h2>
        <input type="text" id="user_name" placeholder="你的姓名">
        <input type="email" id="user_email" placeholder="你的联系方式（邮箱）">
        <textarea id="message" placeholder="你提交的问题"></textarea>
        <button id="submitFeedback">提交</button>
        <button id="cancelFeedback">取消</button>
    </dialog>

    <script>
        // 新增：检测设备是否为手机并检查横屏状态
        function checkMobileAndOrientation() {
            // 检测是否为移动设备
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // 检测是否为竖屏
                const isPortrait = window.matchMedia("(orientation: portrait)").matches;
                
                if (isPortrait) {
                    // 创建并显示提示框
                    const orientationDialog = document.createElement('dialog');
                    orientationDialog.innerHTML = `
                        <h2>提示</h2>
                        <p>为了获得更好的体验，请将您的手机横屏使用</p>
                        <button onclick="this.parentElement.close()">我知道了</button>
                    `;
                    document.body.appendChild(orientationDialog);
                    orientationDialog.showModal();
                    
                    // 监听屏幕方向变化
                    window.addEventListener('orientationchange', function() {
                        if (!window.matchMedia("(orientation: portrait)").matches) {
                            orientationDialog.close();
                        }
                    });
                }
            }
        }

        // 修改页面加载完成后隐藏加载动画的方式为第二个文件的效果
        window.addEventListener('load', function() {
            const loading = document.getElementById('loading');
            
            // 隐藏加载动画
            setTimeout(function() {
                loading.style.opacity = '0';
                setTimeout(function() {
                    loading.style.display = 'none';
                    // 新增：页面加载完成后检查设备和方向
                    checkMobileAndOrientation();
                }, 400);
            }, 800);
        });

        function showAnnouncement() {
            const dialog = document.getElementById('announcementDialog');
            dialog.showModal();
        }

        function closeAnnouncementDialog() {
            const dialog = document.getElementById('announcementDialog');
            dialog.close();
        }

        // 获取提交反馈按钮
        const submitFeedbackBtn = document.getElementById('submitFeedback');
        submitFeedbackBtn.addEventListener('click', function () {
            // 获取用户输入的邮箱地址
            const userEmail = document.getElementById('user_email').value;

            // 邮箱格式验证的正则表达式
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            // 验证邮箱格式
            if (!emailRegex.test(userEmail)) {
                alert('请输入有效的邮箱地址！');
                return;
            }

            // 如果邮箱格式有效，可以继续处理提交逻辑
            // 这里可以添加发送邮件或其他处理逻辑
            alert('感谢你！');
            const feedbackDialog = document.getElementById('feedbackDialog');
            feedbackDialog.close();
        });

        // 获取反馈按钮并显示反馈对话框
        const feedbackBtn = document.getElementById('feedbackBtn');
        feedbackBtn.addEventListener('click', function () {
            const feedbackDialog = document.getElementById('feedbackDialog');
            feedbackDialog.showModal();
        });

        // 获取取消反馈按钮并关闭反馈对话框
        const cancelFeedbackBtn = document.getElementById('cancelFeedback');
        cancelFeedbackBtn.addEventListener('click', function () {
            const feedbackDialog = document.getElementById('feedbackDialog');
            feedbackDialog.close();
        });

        function copyToClipboard(selector) {
            const text = document.querySelector(selector).innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('复制成功: ' + text);
            }).catch(err => {
                alert('复制失败: ' + err);
            });
        }

        // 初始化 EmailJS
        emailjs.init("rKqKFW56LbtOlXMxd");

        // 处理反馈按钮点击事件
        document.getElementById('feedbackBtn').addEventListener('click', function () {
            const dialog = document.getElementById('feedbackDialog');
            dialog.showModal();
        });

        // 处理提交按钮点击事件
        document.getElementById('submitFeedback').addEventListener('click', function () {
            const userName = document.getElementById('user_name').value;
            const userEmail = document.getElementById('user_email').value;
            const message = document.getElementById('message').value;

            if (userName && userEmail && message) {
                emailjs.send("service_x1ryoog", "template_8wyjz97", {
                    user_name: userName,
                    user_email: userEmail,
                    message: message
                })
                    .then(function (response) {
                        alert('反馈提交成功！');
                        const dialog = document.getElementById('feedbackDialog');
                        dialog.close();
                    }, function (error) {
                        alert('反馈提交失败：' + error.text);
                    });
            } else {
                alert('请填写所有必填字段！');
            }
        });

        // 处理取消按钮点击事件
        document.getElementById('cancelFeedback').addEventListener('click', function () {
            const dialog = document.getElementById('feedbackDialog');
            dialog.close();
        });
    </script>

    <script src="theme.js"></script> <!-- 确保引入 theme.js -->
    <script>
        // 页面加载完成后隐藏加载动画
        window.onload = function () {
            document.getElementById('loading').style.display = 'none';
        };
    </script>
</body>
</html>